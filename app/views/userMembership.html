<div class="container">
    <div class="overview cf">
        <div class="photo">
            <h3 class="form-title">Mein Foto auf der Karte</h3>
            <img ng-if="membership.photo" ng-src="{{membership.photo}}" alt=""/>
            <button class="form-button" ng-click="upload('avatar')">Hochladen</button>
        </div>
        <div class="form-overview">
            <ul>
                <li>
                    <b>Meine Kartennummer::</b>
                    <p>{{membership.cardNumber}}</p>
                </li><li ng-if="!voucher || (!voucher.freeSubscriptionGranted && voucher.discountDuarationInMonths)">
                    <b>Regulärer Preis:</b>
                    <p>{{overview.price}}€ / Monat</p>
                </li><li ng-if="voucher.freeSubscriptionGranted">
                    <b>Sonderpreis:</b>
                    <p>0€ / Monat</p>
                </li><li ng-if="!voucher.freeSubscriptionGranted && voucher">
                    <b>Ermäßigter Preis:</b>
                    <p class="green"><span ng-if="voucher.percentOff">{{(Math.floor(overview.price * (10 - voucher.percentOff / 10) * 10) / 100).toFixed(2)}}€</span><span ng-if="voucher.amountOff">{{overview.price - voucher.amountOff}}€</span> <span ng-if="voucher.discountDuarationInMonths">/ Monat für {{voucher.discountDuarationInMonths}} Monate</span></p>
                </li><li ng-class="{'column-break': !voucher.freeSubscriptionGranted}">
                    <b>Beginn Mitgliedschaft:</b>
                    <p>{{membership.subscriptionStartsOn | date: 'dd.MM.yyyy'}}</p>
                </li><li>
                    <b>Laufzeit:</b>
                    <p ng-if="!voucher.freeSubscriptionGranted || !voucher">unbefristet / Verlängerung bei Nicht&#8209;Kündigung um je einen Monat</p>
                    <p ng-if="voucher.freeSubscriptionGranted">{{voucher.freeSubscriptionDuarationInMonths}}</p>
                </li><li ng-if="!voucher.freeSubscriptionGranted || !voucher">
                    <b>Abbuchung:</b>
                    <p>Monatlich beginnend mit dem Tag der Mitgliedschaft</p>
                </li><li ng-if="!voucher.freeSubscriptionGranted || !voucher">
                    <b>Kündigung:</b>
                    <p>Im Monat 1: jederzeit (Probemonat). Ab Monat 4: monatlich kündbar bis Monatsende</p>
                </li>
            </ul>
        </div>
    </div>
    <h3 class="form-title">Willst Du Deinen Karten-Typ ändern?</h3>
    <ul class="b-select-card" id="cards">
        <li ng-repeat="card in cards">
            <img class="card-image" ng-if="card.type === 'LITE'" src="images/card-lite.png" alt=""/>
            <img class="card-image" ng-if="card.type === 'WHITE'" src="images/card-white.png" alt=""/>
            <img class="card-image" ng-if="card.type === 'BLACK'" src="images/card-black.png" alt=""/>
            <h3>{{card.name}}<p><strong ng-class="{'old': !voucher.freeSubscriptionGranted && voucher }">{{card.price}}€</strong>
                <b ng-if="!voucher.freeSubscriptionGranted && voucher"><span ng-if="voucher.percentOff">{{Math.floor(card.price * (10 - voucher.percentOff / 10) / 10)}}€</span><span ng-if="voucher.amountOff">{{card.price - voucher.amountOff}}€</span></b> /Monat</p></h3>
            <dl>
                <dd>Kurse / Monat:</dd>
                <dt>{{card.courses}}</dt>
                <dd>Kurse pro Anbieter / Monat:</dd>
                <dt>{{card.coursesPerSupplier}}</dt>
                <dd>Mindestlaufzeit:</dd>
                <dt>{{card.minimumTerm}}</dt>
            </dl>
            <button ng-model="membership.type" ng-change="changeCard()" btn-radio="card.type"><i class="fa"></i>{{order.type === card.type ? 'Ausgewählt' : 'Auswählen'}}</button>
        </li>
    </ul>
    <form class="form-profile">
        <button type="button" ng-hide="loading" ng-disabled="notChanged" ng-click="changeMembership(type)">Änderung bestätigen</button>
        <div class="form-rel spinner-wrapper" ng-show="loading">
            <span class="spinner" us-spinner="{lines: 11, radius:10, width:5, length: 7, color: '#ff695c', left: 0, top: 20}"></span>
        </div>
        <p class="message" ng-if="messageNotAvailable">Diese Funktion ist zur Zeit noch nicht aktiv, kontaktieren Sie bitte dazu unseren Kundenservice auf
            <a href="mailto:service@somuchmore.org">service@somuchmore.org</a>
        </p>
        <p class="message" ng-if="messageNotDelivered">Es gab einen Fehler. Bitte kontaktieren Sie den Support über
            <a href="mailto:kundenservice@somuchmore.org">kundenservice@somuchmore.org</a>
        </p>
        <label class="cancel">Wenn Du Deine Mitgliedschaft kündigen willst, klicke <a href="" ng-click="cancelMembership()">hier.</a></label>
    </form>
</div>
